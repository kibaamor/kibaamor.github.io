<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="领域驱动设计相关的软件架构, kiba, zen, amor, kibazen, kibaamor, 木叶, 木叶禅">
    <meta name="description" content="You are too concerned with what was and what will be">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>领域驱动设计相关的软件架构 | 木叶禅</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/css/my.css">

    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="木叶禅" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">木叶禅</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/learn/" class="waves-effect waves-light">
      
      <i class="fas fa-book" style="zoom: 0.6;"></i>
      
      <span>Learn</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/memo/" class="waves-effect waves-light">
      
      <i class="fas fa-sticky-note" style="zoom: 0.6;"></i>
      
      <span>Memo</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories/" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags/" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about/" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">木叶禅</div>
        <div class="logo-desc">
            
            You are too concerned with what was and what will be
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/learn/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-book"></i>
			
			Learn
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/memo/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-sticky-note"></i>
			
			Memo
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/medias/featureimages/21.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">领域驱动设计相关的软件架构</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/">
                                <span class="chip bg-color">领域驱动设计</span>
                            </a>
                        
                            <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84/">
                                <span class="chip bg-color">软件架构</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" class="post-category">
                                软件工程
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-11-01
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2024-08-20
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    5.1k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    22 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="架构风格和架构模式"><a href="#架构风格和架构模式" class="headerlink" title="架构风格和架构模式"></a>架构风格和架构模式</h2><h3 id="架构风格（Architectural-Styles）"><a href="#架构风格（Architectural-Styles）" class="headerlink" title="架构风格（Architectural Styles）"></a>架构风格（Architectural Styles）</h3><p><a target="_blank" rel="noopener" href="https://ics.uci.edu/~fielding/">Roy Thomas Fielding</a> 在论文 <a target="_blank" rel="noopener" href="https://ics.uci.edu/~fielding/pubs/dissertation/software_arch.htm">Architectural Styles and<br>the Design of Network-based Software Architectures</a> 中对架构风格（Architectural Styles）的描述是：</p>
<blockquote>
<p>An architectural style is a coordinated set of architectural constraints that restricts the roles/features of architectural elements and the allowed relationships among those elements within any architecture that conforms to that style.</p>
<p>架构风格是一组协调的架构约束，它限制架构元素的角色/功能以及符合该风格的任何架构中这些元素之间允许的关系。</p>
</blockquote>
<p>即架构风格描述了一个架构所具有的的特征（约束），具有这个特征（约束）的系统就是特定的架构风格。</p>
<p>Vaughn Vernon 在《实现领域驱动设计》书中对架构风格的描述是：</p>
<blockquote>
<p>An architectural style is to architecture what a design pattern is to a specific design. It is an abstraction of those aspects that are common to different concrete implementations, enabling discussion of their relevant benefits without getting lost in technical detail. There are many different styles of distributed systems architecture, including client-server and distributed objects.</p>
<p>架构风格之于架构就像设计模式之于设计一样。它将不同架构实现所共有的东西抽象出来，使得我们在谈及到架构时不至于陷入技术细节中。分布式系统架构存在着多种架构风格，包括客户端-服务器架构风格和分布式对象架构风格。</p>
</blockquote>
<p>微服务（Microservices）就是一种架构风格。James Lewis 和 Martin Fowler 在 <a target="_blank" rel="noopener" href="https://www.martinfowler.com/microservices/">Microservices Guide</a> 中是这样描述微服务的：</p>
<blockquote>
<p>In short, <strong>the microservice architectural style</strong> is an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms, often an HTTP resource API. These services are built around business capabilities and independently deployable by fully automated deployment machinery. There is a bare minimum of centralized management of these services, which may be written in different programming languages and use different data storage technologies.</p>
<p>简而言之，<strong>微服务架构风格</strong> 是一种将单个应用程序开发为一组小型服务的方法，每个服务都在自己的进程中运行并用轻量级机制（通常是 HTTP 资源 API）进行通信。 这些服务围绕业务功能构建，并可通过全自动部署机制独立部署。 这些服务的集中管理是最低限度的，这些服务可能用不同的编程语言编写并使用不同的数据存储技术。</p>
</blockquote>
<p>而微服务器架构风格需要具有的特征（约束）就是：</p>
<ol>
<li>通过服务来实现独立自治的组件（Componentization via Services）</li>
<li>围绕业务能力构建（Organized around Business Capabilities）</li>
<li>产品化思维（Products not Projects）</li>
<li>轻量级通讯机制（Smart endpoints and dumb pipes）</li>
<li>分散治理（Decentralized Governance）</li>
<li>数据去中心化（Decentralized Data Management）</li>
<li>基础设施自动化（Infrastructure Automation）</li>
<li>容错性设计（Design for failure）</li>
<li>演进式设计（Evolutionary Design）</li>
</ol>
<h3 id="架构模式（Architectural-Patterns）"><a href="#架构模式（Architectural-Patterns）" class="headerlink" title="架构模式（Architectural Patterns）"></a>架构模式（Architectural Patterns）</h3><p>维基百科对架构模式的定义是：</p>
<blockquote>
<p>An architectural pattern is a general, reusable resolution to a commonly occurring problem in software architecture within a given context.</p>
<p>架构模式是针对给定上下文中软件架构中常见问题的通用的、可重用的解决方案。</p>
</blockquote>
<p>关键词是”解决方案”。这也是架构模式和架构风格最大的区别。架构风格讲的是一个架构具有哪些特征，而架构模式则是讲的如何实现出一个具有这些特征的架构。</p>
<p>举个例子，与微服务架构风格对应的模式，微服务架构模式则是指至少包含了下面这些功能的架构：</p>
<ol>
<li>弹性伸缩</li>
<li>服务发现</li>
<li>配置中心</li>
<li>服务网关</li>
<li>负载均衡</li>
<li>服务安全</li>
<li>跟踪监控</li>
<li>降级熔断</li>
</ol>
<h2 id="分层架构（Layered-Architecture）"><a href="#分层架构（Layered-Architecture）" class="headerlink" title="分层架构（Layered Architecture）"></a>分层架构（Layered Architecture）</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>Eric Evans 于 2003 年在<a target="_blank" rel="noopener" href="https://book.douban.com/subject/26819666/">《领域驱动设计：软件核心复杂性应对之道》</a>中提到了一个可用于领域驱动设计的<strong>分层架构</strong>：</p>
<p>为了应对软件的复杂性，需要将软件的不同部分，如用户界面、业务逻辑、数据库操作等<strong>关注点进行分离</strong>，让分离出来的关注点既能专注于实现软件不同的部分，也能维持各个部分之间复杂的关系。根据行业经验和惯例，普遍使用分层的方式来分离关注点。</p>
<p>常见分层有下面几个，每个层都包含了与该层关注点相关的代码：</p>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/LayeredArchitecture.webp" alt="LayeredArchitecture"></p>
<ol>
<li><p><strong>用户界面层（User Interface）</strong></p>
<p> 专注于为软件的”用户”提供信息和响应”用户”的请求等交互操作。</p>
<p> 这里的”用户”既可以是人类，也可以是其他应用程序，如脚本。交互的方式既包括典型的用户图形图像界面（User Graphic Interface），也包括 Restful API。</p>
</li>
<li><p><strong>应用层（Application Layer）</strong></p>
<p> 专注于对外暴露软件能完成哪些用例，并在此层中通过编排<strong>领域层（Domain Layer）</strong>中的领域对象来实现这些用例。</p>
<p> 此层不包含任何业务逻辑，也不会存在与业务相关的条件判断语句。</p>
<p> 能在此层做的还有：调用其它微服务、拼装结果、安全认证、权限校验、事务控制、发送或订阅领域事件等。</p>
</li>
<li><p><strong>领域层（Domain Layer）</strong></p>
<p> 专注于实现业务逻辑，表达业务概念，处理业务状态信息以及业务规则这些行为，此层是整个项目的重点。</p>
<p> 此层包含聚合根、实体、值对象、领域服务等领域模型中的领域对象。</p>
</li>
<li><p><strong>基础设施层（Infrastructure）</strong></p>
<p> 专注于为其它各层提供通用的技术和基础服务，包括第三方工具、驱动、消息中间件、网关、文件、缓存以及数据库等。</p>
<p> 常见的功能是提供数据库持久化。</p>
</li>
</ol>
<p>实现经典的<strong>分层架构</strong>需遵循下面这些规则：</p>
<ol>
<li>所有的依赖项都是朝一个方向：从<strong>用户界面层（User Interface）</strong>到<strong>基础设施层（Infrastructure）</strong>。</li>
<li>与某层相关的逻辑不能放到其他层中。比如：<strong>用户界面层（User Interface）</strong>中不能包含与业务逻辑或数据库相关的代码。</li>
</ol>
<h3 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h3><p>Vaughn Vernon 在<a target="_blank" rel="noopener" href="https://book.douban.com/subject/25844633/">《实现领域驱动设计》</a>书中给出了一个使用了<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">依赖倒置原则（Dependency Inversion Principle）</a>改进后的<strong>分层架构</strong>：</p>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/LayeredArchitectureWithDIP.webp" alt="LayeredArchitectureWithDIP"></p>
<p>改进的方式就是：</p>
<blockquote>
<p>we would have a Repository implemented in Infrastructure for an interface defined in Domain. Focusing on the Domain Layer, using DIP enables both the Domain and Infrastructure to depend on abstractions (interfaces) defined by the domain model.</p>
<p>我们可以在领域层中定义资源库接口，然后在基础设施层中实现该接口。我们将关注点放在领域层上，采用依赖倒置原则，使领域层和基础设施层都只依赖于由领域模型定义的抽象接口。</p>
</blockquote>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><strong>分层架构</strong>的核心思想是通过为软件分层的方式来达到<strong>分离关注点</strong>的目的，从而降低软件的复杂性。</p>
<p>分层的实际实现是通过调整源代码的组织结构来实现的。这意味着<strong>分层架构</strong>除了为我们提供有关如何组织源代码的指导外，并没有为我们提供关于软件设计和实现的其他方面的信息。</p>
<p><strong>分层架构</strong>是为了组织代码以实现关注点分离，仅此而已。</p>
<p><strong>分层架构</strong>可以进一步细分为<strong>严格分层架构</strong>和<strong>松散分层架构</strong>。<strong>严格分层架构</strong>不允许耦合跨层，而<strong>松散分层架构</strong>则允许耦合跨层。</p>
<h3 id="其他资料"><a href="#其他资料" class="headerlink" title="其他资料"></a>其他资料</h3><ol>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/layered-architecture-is-good">Layered Architecture Is Good</a></li>
<li><a target="_blank" rel="noopener" href="https://herbertograca.com/2017/08/03/layered-architecture/">Layered Architecture</a></li>
</ol>
<h2 id="六边形架构（Hexagonal-Architecture）"><a href="#六边形架构（Hexagonal-Architecture）" class="headerlink" title="六边形架构（Hexagonal Architecture）"></a>六边形架构（Hexagonal Architecture）</h2><p><strong>六边形架构</strong>由 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Alistair_Cockburn">Alistair Cockburn</a> 于 2005 在其<a target="_blank" rel="noopener" href="https://web.archive.org/web/20180822100852/http://alistair.cockburn.us/Hexagonal+architecture">个人博客</a>中提出。</p>
<p><strong>六边形架构</strong>将软件分为了里外两部分：</p>
<ol>
<li>里面部分是与业务逻辑相关的，软件的核心，由<strong>分层架构</strong>中的<strong>应用层（Application Layer）</strong>和<strong>领域层（Domain Layer）</strong>组成；</li>
<li>外面部分是与应用逻辑相关的，软件的实现，由<strong>分层架构</strong>中的其他层组成。</li>
<li>里面和外面通过<strong>端口</strong>以及对应的实现<strong>适配器</strong>连接起来，所以也称为<strong>端口适配器（Ports &amp; Adapters）</strong>。</li>
</ol>
<blockquote>
<p><strong>六边形架构</strong>之所以叫六边形是为了强调里面部分通过多个<strong>端口</strong>与外面部分连接，而避免大家像分层架构层层依赖那样一维的去思考。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/HexagonalArchitecture.webp" alt="HexagonalArchitecture"></p>
<p>实现<strong>六边形架构</strong>需遵循下面这些规则：</p>
<ol>
<li>里面部分不能对外面部分有任何依赖。</li>
<li>外面部分不能有任何用例或者领域逻辑。</li>
<li>根据<strong>端口</strong>实现的任何<strong>适配器</strong>都能使用。</li>
</ol>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p><strong>六边形架构</strong>的核心思想有两点：</p>
<ol>
<li>将软件的核心（业务逻辑相关的部分）与所有的与实现相关的（应用逻辑相关的部分）依赖分离，核心干净纯粹，测试和修改业务逻辑都变得更容易。</li>
<li>以<strong>端口</strong>和<strong>适配器</strong>的角度思考。使得更改 UI 和数据库等<strong>适配器</strong>不会对<strong>端口</strong>有影响。</li>
</ol>
<p>最后需要注意，<strong>六边形架构</strong>在代码组织方面没有做出任何假设，并且与<strong>分层架构</strong>类似，它并没有告诉我们太多关于系统设计本身的信息。</p>
<h3 id="其他资料-1"><a href="#其他资料-1" class="headerlink" title="其他资料"></a>其他资料</h3><ol>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/hexagonal-architecture-is-powerful">Hexagonal Architecture Is Powerful</a></li>
<li><a target="_blank" rel="noopener" href="https://jmgarridopaz.github.io/content/hexagonalarchitecture.html">Ports and Adapters Pattern (Hexagonal Architecture)</a></li>
<li><a target="_blank" rel="noopener" href="https://herbertograca.com/2017/09/14/ports-adapters-architecture/">Ports &amp; Adapters Architecture</a></li>
</ol>
<h2 id="洋葱架构（Onion-Architecture）"><a href="#洋葱架构（Onion-Architecture）" class="headerlink" title="洋葱架构（Onion Architecture）"></a>洋葱架构（Onion Architecture）</h2><h3 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h3><p><strong>洋葱架构</strong>由 <a target="_blank" rel="noopener" href="https://jeffreypalermo.com/author/jeffreypalermo/">Jeffrey Palermo</a> 于 2008 年在其<a target="_blank" rel="noopener" href="https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/">个人博客</a>中提出。</p>
<p><strong>洋葱架构</strong>并不是一个全新的架构，更像是使用了<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">依赖倒置原则（Dependency Inversion Principle）</a>改进后的<strong>严格分层架构</strong>与<strong>六边形架构</strong>的结合。</p>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/OnionArchitecture.webp" alt="OnionArchitecture"></p>
<p><strong>洋葱架构</strong>在<a href="#端口适配器模式ports-and-adapters-pattern">端口适配器模式</a>的基础上，将内层的<strong>应用程序核心</strong>分为了多层，并使用<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">依赖倒置原则（Dependency Inversion Principle）</a>对内部分层进行优化，从内到外依次是：</p>
<ol>
<li><strong>领域模型层（Domain Model）</strong>。整个架构的中心，包含具有状态和行为的领域模型，这一层没有任何外部依赖。</li>
<li><strong>领域服务层（Domain Service）</strong>。本质是领域模型存储库接口的定义层，提供领域模型的查找和保存。接口在此层定义，但是接口的实现则是在最外层实现。</li>
<li><strong>应用服务层（Application Service）</strong>。使用领域模型层和领域服务层来实现软件支持的用例。</li>
<li><strong>UI（User Interface）</strong>、<strong>基础设施（Infrastructure）</strong>以及<strong>测试用例（Tests）层</strong>。UI 使用应用服务层提供的服务来展示 UI，测试用例则是调用应用服务层提供的服务接口来进行测试，基础设施层则是实现了领域服务层中定义的领域模型存储库接口。</li>
</ol>
<p>实现<strong>洋葱架构</strong>需遵循下面这些规则：</p>
<ol>
<li>应用程序围绕独立的对象模型构建（The application is built around an independent object model）</li>
<li>内层定义接口。外层实现接口（Inner layers define interfaces. Outer layers implement interfaces）</li>
<li>层向中心耦合（Direction of coupling is toward the center）</li>
<li>所有应用程序核心代码都可以与基础设施分开编译和运行（All application core code can be compiled and run separate from infrastructure）</li>
</ol>
<p><strong>洋葱架构</strong>与经典<strong>分层架构</strong>的区别：</p>
<ol>
<li>在经典<strong>分层架构</strong>中，一个层只能调用其正下方的层。而在<strong>洋葱架构</strong>中，任何外层可以调用任何内层。</li>
</ol>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><p><strong>洋葱架构</strong>的核心思想是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dependency_inversion_principle">依赖倒置原则（Dependency Inversion Principle）</a>的应用和内层不能对外层有直接的依赖。</p>
<h3 id="其他资料-2"><a href="#其他资料-2" class="headerlink" title="其他资料"></a>其他资料</h3><ol>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/onion-architecture-is-interesting">Onion Architecture Is Interesting</a></li>
<li><a target="_blank" rel="noopener" href="https://herbertograca.com/2017/09/21/onion-architecture/">Onion Architecture</a></li>
</ol>
<h2 id="Boundary-Control-Entity"><a href="#Boundary-Control-Entity" class="headerlink" title="Boundary-Control-Entity"></a>Boundary-Control-Entity</h2><h3 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h3><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Entity-control-boundary">Boundary-Control-Entity（BCE）</a> 架构由 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Ivar_Jacobson">Ivar Jacobson</a> 于1992年在 <a target="_blank" rel="noopener" href="https://www.amazon.com/Object-Oriented-Software-Engineering-Driven-Approach/dp/0201403471">Object-Oriented Software Engineering: A use case driven approach</a> 中提出。</p>
<blockquote>
<p>Boundary-Control-Entity（BCE）也叫 Entity-Control-Boundary（ECB）或 Entity-Boundary-Control（EBC）。</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/EICObjects.webp" alt="EICObjects"></p>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/EIC.webp" alt="EIC"></p>
<ol>
<li><p>Boundary</p>
<p> 外界与系统交互的接口。</p>
</li>
<li><p>Control</p>
<p> 包含所有不适合放在 Entity 和 Boundary  的行为。</p>
<p> Robert C. Martin 对 Interactor 的描述是包含特定于应用程序的业务规则（The interactors on the other hand, have application specific business rules）。</p>
</li>
<li><p>Entity</p>
<p> 包含与问题域相关的数据和行为。</p>
<p> Robert C. Martin 对 Entity 的描述是包含与应用无关的的业务逻辑（contain application independent business rules）。</p>
</li>
</ol>
<h3 id="其他资料-3"><a href="#其他资料-3" class="headerlink" title="其他资料"></a>其他资料</h3><ol>
<li><a target="_blank" rel="noopener" href="https://youtu.be/Nltqi7ODZTM?t=2442">Clean Architecture</a></li>
<li><a target="_blank" rel="noopener" href="https://herbertograca.com/2017/08/24/ebi-architecture/">EBI Architecture</a></li>
</ol>
<h2 id="整洁架构（Clean-Architecture）"><a href="#整洁架构（Clean-Architecture）" class="headerlink" title="整洁架构（Clean Architecture）"></a>整洁架构（Clean Architecture）</h2><p>整洁架构由 <a target="_blank" rel="noopener" href="https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html">Robert C. Martin</a> 于 2012 年在总结下面的这些架构的基础上提炼出来的：</p>
<ol>
<li><a target="_blank" rel="noopener" href="http://alistair.cockburn.us/Hexagonal+architecture">Hexagonal Architecture (a.k.a. Ports and Adapters)</a></li>
<li><a target="_blank" rel="noopener" href="http://jeffreypalermo.com/blog/the-onion-architecture-part-1/">Onion Architecture</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.cleancoders.com/2011-09-30-Screaming-Architecture">Screaming Architecture</a></li>
<li><a target="_blank" rel="noopener" href="http://www.amazon.com/Lean-Architecture-Agile-Software-Development/dp/0470684208/">DCI</a>, <a target="_blank" rel="noopener" href="https://www.artima.com/articles/the-dci-architecture-a-new-vision-of-object-oriented-programming">The DCI Architecture: A New Vision of Object-Oriented Programming</a></li>
<li><a target="_blank" rel="noopener" href="https://www.amazon.com/Object-Oriented-Software-Engineering-Approach/dp/0201544350">BCE</a></li>
</ol>
<p>整洁架构将系统分层了四层（但不是只能有四层），通常用圆圈表示：</p>
<ol>
<li><p>实体（Entities）</p>
<p> 实体层封装了系统范围内的关键业务逻辑规则。一个业务实体可以是一个带有方法的对象，也可以是一组数据结构和函数的集合。只要它能被系统中的其他不同应用复用就可以。</p>
<p> 可以将这里的实体视作为 DDD 中的领域实体。</p>
</li>
<li><p>用例（Use Cases）</p>
<p> 用例层包含了应用程序特定的业务规则，它封装和实现了整个系统的所有用例场景。</p>
<p> <strong>需要注意的是，每个类都只实现一个用例。</strong></p>
</li>
<li><p>接口适配器（Interface Adapters）</p>
<p> 这层中的软件是一组适配器，用于将数据从最适合用例和实体的格式转换为最适合某些外部机构（例如数据库或 Web）的格式。MVC 架构、Presenter、View 和 Controller 都在这层。</p>
</li>
<li><p>框架和驱动（Frameworks and Drivers）</p>
<p> 最外层一般由数据库、Web框架等框架和工具组成。</p>
<p> 一般情况下，我们不会在这一层编写太多代码，但明确说明这些工具在架构中的位置和优先级非常重要。</p>
</li>
</ol>
<p>圆圈之间存在很强的依赖规则：内圈中的代码不能直接引用外圈中的一段代码。所有向外的通信都应该通过接口进行。这与洋葱架构中的依赖关系规则完全相同。</p>
<p>除了层之外，Clean Architecture 还提供了一些有关需要实现的类的提示。在架构图的右下角，从控制器到用例的控制流通过输入端口接口，并通过输出端口接口流向演示器。这可确保用例和用户界面正确解耦。</p>
<h3 id="总结-3"><a href="#总结-3" class="headerlink" title="总结"></a>总结</h3><p><strong>整洁架构</strong>的核心思想有两点：</p>
<ol>
<li>严格遵守依赖倒置原则。</li>
<li>用例导向。每个用例一个类，促进了代码的垂直切片。</li>
</ol>
<h3 id="其他资料-4"><a href="#其他资料-4" class="headerlink" title="其他资料"></a>其他资料</h3><ol>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/dci-architecture-is-visionary">DCI Architecture Is Visionary</a></li>
<li><a target="_blank" rel="noopener" href="https://fulloo.info/">DCI - Data Context Interaction</a></li>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/clean-architecture-is-screaming">Clean Architecture Is Screaming</a></li>
<li><a target="_blank" rel="noopener" href="https://youtu.be/Nltqi7ODZTM">Clean Architecture</a></li>
<li><a target="_blank" rel="noopener" href="https://herbertograca.com/2017/09/28/clean-architecture-standing-on-the-shoulders-of-giants/">Clean Architecture: Standing on the shoulders of giants</a></li>
</ol>
<h2 id="一些不错的总结"><a href="#一些不错的总结" class="headerlink" title="一些不错的总结"></a>一些不错的总结</h2><p>摘录自来自：<a target="_blank" rel="noopener" href="https://www.codingblocks.net/podcast/clean-architecture-make-your-architecture-scream/">Clean Architecture - Make Your Architecture Scream</a></p>
<h3 id="Make-Your-Architecture-Scream"><a href="#Make-Your-Architecture-Scream" class="headerlink" title="Make Your Architecture Scream"></a>Make Your Architecture Scream</h3><h4 id="Policy-and-Level"><a href="#Policy-and-Level" class="headerlink" title="Policy and Level"></a>Policy and Level</h4><ul>
<li>A computer program is a statement of policy - known inputs and expected outputs</li>
<li>Most systems have many statements of separate policies<br>  -Business rules, formatting, ETL, etc</li>
<li>Policies that change for the same reasons should be grouped into the same components and vice versa</li>
<li>Goal is to create acyclic dependency graphs where items with similar policies are at the same level, and dependencies are at the edges<ul>
<li>Direction of dependencies is based on the level of components they connect<ul>
<li>Level is the distance from the inputs and outputs</li>
<li>The further the policy is from the inputs and outputs, the higher the level</li>
</ul>
</li>
</ul>
</li>
<li>Data flows and source code dependencies do not always point in the same direction<ul>
<li>Dependencies should be decoupled from data flow but coupled to the level</li>
</ul>
</li>
<li>The importance of this is the fact that the higher level components are now reusable with different input and output sources</li>
<li>Policies that change for the same reason or at the same time are bounded by the SRP or CCP<ul>
<li>Higher level components typically change less frequently than the lower level components</li>
<li>Lower level components (those that change frequently) should be plugins to the higher level components</li>
</ul>
</li>
</ul>
<h4 id="Business-Rules"><a href="#Business-Rules" class="headerlink" title="Business Rules"></a>Business Rules</h4><ul>
<li>“Business rules are rules or procedures that make or save the business money” (whether or not they were implemented on a computer)</li>
<li>Critical business rules - rules critical to the business itself, with or without a computer, for example, calculating interest on a loan.</li>
<li>Critical business data - critical data that would exist even if there wasn’t an automated system.</li>
<li>Critical business rules and data are tightly bound and therefore a good space for an object, also called…</li>
</ul>
<h5 id="Entity"><a href="#Entity" class="headerlink" title="Entity"></a>Entity</h5><ul>
<li>An object that contains critical business rules and critical business data</li>
<li>These should be separated from every other concern in the application<ul>
<li>No dependencies on databases, 3rd party dependencies, user interfaces, etc.</li>
</ul>
</li>
<li>These objects are pure business.</li>
</ul>
<h5 id="Use-Cases"><a href="#Use-Cases" class="headerlink" title="Use Cases"></a>Use Cases</h5><ul>
<li>There are additional business rules that are not “critical” - they define how the automated system should work, but would have no impact on a manual business operation</li>
<li>Use case - description of how an automated system is to be used<ul>
<li>These indicate how and when a critical business entity should be invoked</li>
<li>These also indicate the inputs and outputs but not where they come from (database, UI, etc.)<ul>
<li>The how of data gets in and out is irrelevant to the use case</li>
</ul>
</li>
</ul>
</li>
<li>Entities have no knowledge of how use cases use them<ul>
<li>Follows the Dependency Inversion Principle - higher level components know nothing of the lower level components - the direction is inverted</li>
</ul>
</li>
<li>Use cases are specific to a single application</li>
<li>Entities are generalizations</li>
</ul>
<h5 id="Request-and-Response-Models"><a href="#Request-and-Response-Models" class="headerlink" title="Request and Response Models"></a>Request and Response Models</h5><ul>
<li>Use cases accept simple request objects for input and return simple response objects for outputs<ul>
<li>They SHOULD NOT depend on any frameworks or other dependencies - simple objects</li>
<li>Seems like a good idea to return a reference to an entity object - do NOT do this<ul>
<li>Entity objects are higher level components that will change for different reasons so stick to the simple request / response objects</li>
<li>Coupling them together violates the Common Closer and Single Responsibility Principles</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="So-Business-Rules-…"><a href="#So-Business-Rules-…" class="headerlink" title="So, Business Rules …"></a>So, Business Rules …</h5><ul>
<li>“Business rules are the reason a software system exists”</li>
<li>Should remain pristine</li>
<li>Are independent and reusable</li>
</ul>
<h4 id="Screaming-Architecture"><a href="#Screaming-Architecture" class="headerlink" title="Screaming Architecture"></a>Screaming Architecture</h4><ul>
<li>Upon initial inspection, does your application structure scream Spring, or does it scream Healthcare software?</li>
<li>Architecture should scream the use cases of the application, not the frameworks or dependencies in the application</li>
<li>“If your architecture is based on frameworks, then it cannot be based on your use cases”</li>
<li>A house’s architecture is focused on usability, not whether the house is built of bricks or stucco<ul>
<li>Again, going back to deferring decisions like that until further down the road</li>
</ul>
</li>
<li>The “web” is a delivery mechanism - it’s your IO layer - much like a mobile app, desktop application or any other</li>
</ul>
<h4 id="The-Theme-and-Purpose"><a href="#The-Theme-and-Purpose" class="headerlink" title="The Theme and Purpose"></a>The Theme and Purpose</h4><ul>
<li>The architecture is all about structures that support the use cases of the application</li>
<li>Architecture is not a framework nor is it supplied by a framework.</li>
<li>Good architecture allows you to defer and delay decisions as well as make it easy to change your mind about those decisions.</li>
</ul>
<h4 id="Frameworks-are-Tools-NOT-Ways-of-Life"><a href="#Frameworks-are-Tools-NOT-Ways-of-Life" class="headerlink" title="Frameworks are Tools, NOT Ways of Life"></a>Frameworks are Tools, NOT Ways of Life</h4><ul>
<li>Look at frameworks with skepticism - you don’t want to adopt the be all end all position<ul>
<li>They should NOT dictate your application architecture</li>
</ul>
</li>
<li>How should you use it?</li>
<li>How should you protect yourself from it?</li>
</ul>
<h4 id="Testable-Architectures"><a href="#Testable-Architectures" class="headerlink" title="Testable Architectures"></a>Testable Architectures</h4><ul>
<li>If you’ve done your job right, then unit testing should be easy to do as everything was decoupled properly<ul>
<li>Entity objects will be plain old objects with no external dependencies</li>
<li>Use case objects will coordinate the use of entity objects, again with no infrastructure dependencies</li>
</ul>
</li>
</ul>
<h4 id="Does-your-Architecture-Scream"><a href="#Does-your-Architecture-Scream" class="headerlink" title="Does your Architecture Scream?"></a>Does your Architecture Scream?</h4><ul>
<li>Your architecture should quickly identify the purpose of your system.</li>
</ul>
<p>They: “<em>We see some things that look like models - where are the views and controllers?</em>“</p>
<p>You: “<em>Oh, those are details that needn’t concern us at the moment. We’ll decide about them later.</em>“</p>
<h3 id="The-Clean-Architecture"><a href="#The-Clean-Architecture" class="headerlink" title="The Clean Architecture"></a>The Clean Architecture</h3><p>Uncle Bob’s version of the Clean Architecture diagram:</p>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/TheCleanArchitectureDiagram.webp" alt="TheCleanArchitectureDiagram"></p>
<p>Our re-imagining of it as a cone:</p>
<p><img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/images/领域驱动设计相关的软件架构/The-Clean-Architecture-Cone.webp" alt="The-Clean-Architecture-Cone"></p>
<ul>
<li>It’s really about the Separation of Concerns<ul>
<li>Dividing software into layers</li>
</ul>
</li>
<li>Should be independent of frameworks</li>
<li>They should be testable</li>
<li>They should be independent of a UI</li>
<li>They should be independent of a database</li>
<li>They should be independent of interfaces to 3rd party dependencies</li>
<li>The Clean Architecture Diagram<ul>
<li>Innermost: “Enterprise / Critical Business Rules” - Entities</li>
<li>Next out: “Application business rules” - Use Cases</li>
<li>Next out: “Interface adapters” - Gateways, Controllers, Presenters</li>
<li>Outer: “Frameworks and drivers” - Devices, Web, UI, External Interfaces, DB</li>
</ul>
</li>
<li>Moving inward, the level of abstraction and policy increase</li>
<li>The innermost circle is the most general/highest level</li>
<li>Inner circles are policies</li>
<li>Outer circles are mechanisms</li>
<li>Inner circles cannot depend on outer circles</li>
<li>Outer circles cannot influence inner circles</li>
</ul>
<h4 id="Entities"><a href="#Entities" class="headerlink" title="Entities"></a>Entities</h4><ul>
<li>Entities should be usable by many applications (critical business rules) and should not be impacted by anything other than a change to the critical business rule itself</li>
<li>They encapsulate the most general/high-level rules.</li>
</ul>
<h4 id="Use-Cases-1"><a href="#Use-Cases-1" class="headerlink" title="Use Cases"></a>Use Cases</h4><ul>
<li>Use cases are application specific business rules<ul>
<li>Changes should not impact the Entities</li>
<li>Changes should not be impacted by infrastructure such as a database</li>
</ul>
</li>
<li>The use cases orchestrate the flow of data in/out of the Entities and direct the Entities to use their Critical Business Rules to achieve the use case</li>
</ul>
<h4 id="Interface-Adapters"><a href="#Interface-Adapters" class="headerlink" title="Interface Adapters"></a>Interface Adapters</h4><ul>
<li>Converts data from data layers to use case or entity layers<ul>
<li>Presenters, views and controllers all belong here</li>
</ul>
</li>
<li>No code further in (use cases, entities) should have any knowledge of the db</li>
</ul>
<h4 id="Frameworks-and-Drivers"><a href="#Frameworks-and-Drivers" class="headerlink" title="Frameworks and Drivers"></a>Frameworks and Drivers</h4><ul>
<li>These are the glue that hook the various layers up</li>
<li>The infrastructure details live here</li>
<li>You’re not writing much of this code, i.e. we use SQL Server, but we don’t write it.</li>
</ul>
<h4 id="Crossing-Boundaries"><a href="#Crossing-Boundaries" class="headerlink" title="Crossing Boundaries"></a>Crossing Boundaries</h4><ul>
<li>Flow of control went from the controller, through the application use case, then to the presenter</li>
<li>Source code dependencies point in towards the use cases</li>
<li>Dependency Inversion Principle<ul>
<li>Use case needs to call a presenter - doing so would violate the dependency rule - inner circles cannot call (or know about) outer circles….<ul>
<li>The use case would need to call an interface<ul>
<li>The implementation of that interface would be provided by the interface adapter layer - this is how the dependency is inverted<ul>
<li>This same type of inversion of control is used all throughout the architecture to invert the flow of control</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Data-Crossing-Boundaries"><a href="#Data-Crossing-Boundaries" class="headerlink" title="Data Crossing Boundaries"></a>Data Crossing Boundaries</h4><ul>
<li>Typically data crossing the boundaries consist of simple data structures</li>
<li>DO NOT PASS ENTITY OBJECTS OR DATA ROWS!<ul>
<li>This would violate the dependency rules</li>
</ul>
</li>
<li>Data is passed in the format that is most convenient to the inner circle / layer</li>
<li>These are isolated, simple data structures<ul>
<li>Meaning our DTOs needed to cross the boundaries should belong in the inner circle, or at least their definition (interface, abstract class)</li>
</ul>
</li>
</ul>
<h4 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h4><ul>
<li>Conforming to the rules is not difficult (but requires work) and will set you up to be able to plug and play pieces in the future</li>
</ul>
<h2 id="其他常见的术语"><a href="#其他常见的术语" class="headerlink" title="其他常见的术语"></a>其他常见的术语</h2><ol>
<li><p>阻抗失衡（Impedance Mismatch）</p>
<p> <a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/impedance-mismatch-in-dbms/">Impedance Mismatch in DBMS</a></p>
<blockquote>
<p>Impedance mismatch is a term used in computer science to describe the problem that arises when two systems or components that are supposed to work together have different data models, structures, or interfaces that make communication difficult or inefficient.</p>
<p>In the context of databases, impedance mismatch refers to the discrepancy between the object-oriented programming (OOP) model used in application code and the relational model used in database management systems (DBMS). While OOP models are designed to represent data as objects with properties and methods, relational models represent data as tables with columns and rows.</p>
</blockquote>
</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://kibazen.cn" rel="external nofollow noreferrer">Kiba Amor</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                    </span>
                <span class="reprint-info">
                    <a href="https://kibazen.cn/ling-yu-qu-dong-she-ji-xiang-guan-de-ruan-jian-jia-gou/">https://kibazen.cn/ling-yu-qu-dong-she-ji-xiang-guan-de-ruan-jian-jia-gou/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY-NC-ND 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://kibazen.cn" target="_blank">Kiba Amor</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/">
                                    <span class="chip bg-color">领域驱动设计</span>
                                </a>
                            
                                <a href="/tags/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84/">
                                    <span class="chip bg-color">软件架构</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/yun-yuan-sheng-xun-lian-ying-xue-xi-bi-ji/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/medias/featureimages/7.jpg" class="responsive-img" alt="《云原生训练营》学习笔记">
                        
                        <span class="card-title">《云原生训练营》学习笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2024-03-16
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-category">
                                    学习笔记
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/">
                        <span class="chip bg-color">极客时间</span>
                    </a>
                    
                    <a href="/tags/kubernetes/">
                        <span class="chip bg-color">kubernetes</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/ddd-shi-zhan-ke-xue-xi-bi-ji/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/medias/featureimages/23.jpg" class="responsive-img" alt="《DDD实战课》学习笔记">
                        
                        <span class="card-title">《DDD实战课》学习笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-09-08
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-category">
                                    学习笔记
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/">
                        <span class="chip bg-color">领域驱动设计</span>
                    </a>
                    
                    <a href="/tags/%E6%9E%81%E5%AE%A2%E6%97%B6%E9%97%B4/">
                        <span class="chip bg-color">极客时间</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            headingSelector: 'h2, h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2024</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">Kiba Amor</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/kibaamor" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:5093911+kibaamor@users.noreply.github.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

    
    

    

    

	
    

    

    

    
    <script src="https://cdn.jsdelivr.net/gh/kibaamor/kibaamor.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
